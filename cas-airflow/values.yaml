airflow:
  airflow:
    image:
      repository: docker-registry.default.svc:5000/wksv3k-tools/cas-airflow
      tag: '0.1.0-pre.029'
    executor: Kubernetes
    config:
      AIRFLOW__CORE__REMOTE_LOGGING: True
      AIRFLOW__CORE__REMOTE_BASE_LOG_FOLDER: gs://wksv3k-dev-app1/airflow/logs
      AIRFLOW__CORE__REMOTE_LOG_CONN_ID: gcs_logs
      AIRFLOW__KUBERNETES__GIT_REPO: https://github.com/bcgov/cas-airflow-dags
      AIRFLOW__KUBERNETES__GIT_BRANCH: feature/test-kubernetes
      AIRFLOW__KUBERNETES__GIT_DAGS_FOLDER_MOUNT_POINT: dags
    extraVolumeMounts:
      - name: cas-airflow-home
        mountPath: /usr/local/airflow
      - name: cas-airflow-secret-volume
        mountPath: /usr/local/etc/secrets/gcp-wksv3k-tools-app1-service-account-key
        readOnly: true
    extraVolumes:
      - name: cas-airflow-home
        persistentVolumeClaim:
          claimName: cas-airflow-home
      - name: cas-airflow-secret-volume
        secret:
          secretName: gcp-wksv3k-tools-app1-service-account-key
    extraEnv:
      - name: AIRFLOW__CORE__FERNET_KEY
        valueFrom:
          secretKeyRef:
            name: cas-airflow
            key: fernet_key
      - name: C_FORCE_ROOT
        value: 'true'
  postgresql:
    enabled: true
    postgresDatabase: postgres
  redis:
    enabled: true
    image:
      registry: registry.redhat.io
      repository: rhscl/redis-5-rhel7
      tag: 5-18.1575996553
    securityContext:
      enabled: false
    master:
      command: []
      livenessProbe:
        enabled: false
      readinessProbe:
        enabled: false

